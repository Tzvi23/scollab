@model StudentCollab.Models.User
    @using StudentCollab.Models

@{
    ViewBag.Title = "InboxPage";
}
<script src="~/Scripts/bootstrap.js"></script>
<ng ng-app="myApp">
    <hr>

    <div class="container">
        <li><a href="@Url.Action("MainPage", "MainPage", Model)"><h1>Back to Home </h1></a></li>

        <div class="row" ng-controller="inboxCtrl">
            <aside class="col-md-2 pad-right-0">
                @{
                    switch ((int)TempData["inboxFlag"])
                    {
                        case 0:
                            <ul class="nav nav-pills nav-stacked">
                                <li class="active"><a href="javascript:;" ng-click="groupToPages()"> Inbox </a></li>
                                <li><a href="@Url.Action("SentPage", "Communication", Model)">Sent</a></li>
                            </ul>
                            break;
                        case 1:
                            <ul class="nav nav-pills nav-stacked">
                                <li><a href="@Url.Action("RecivedPage", "Communication", Model)">Inbox</a></li>
                                <li class="active"><a href="javascript:;" ng-click="groupToPages()"> Sent </a></li>
                            </ul>
                            break;

                    }
                }
                <hr>
                <hr>
            </aside>
            <div class="col-md-10">
                <!--inbox toolbar-->
                <div class="row" ng-show="!isMessageSelected()">
                    <div class="col-xs-12 spacer5"></div>
                </div><!--/row-->
                <!--/inbox toolbar-->
                <div class="panel panel-default inbox" id="inboxPanel">
                    <!--message list-->
                    <div class="table-responsive" ng-show="!isMessageSelected()">
                        @{
                            switch ((int)TempData["inboxFlag"])
                            {
                                case 0:

                                    <table class="table table-striped table-hover refresh-container pull-down">
                                        <thead class="hidden-xs">
                                            <tr>
                                                <td class="col-sm-3"><a href="javascript:;"><strong>Subject</strong></a></td>
                                                <td class="col-sm-1"></td>
                                                <td class="col-sm-2"><a href="javascript:;"><strong>From</strong></a></td>
                                                <td class="col-sm-4"><a href="javascript:;"><strong>Date</strong></a></td>
                                                <td class="col-sm-1"></td>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr>
                                                @{
                                                    foreach (Message m in ViewBag.MsgDB)
                                                    {
                                                        <td class="col-sm-3 col-xs-4"><a herf="#" , style="color:black"><strong>@m.id</strong></a></td>
                                                        <td class="col-sm-1 col-xs-4"></td>
                                                        <td class="col-sm-2 col-xs-4">@m.senderName</td>
                                                        <td class="col-sm-4 col-xs-6">@m.date</td>
                                                    }
                                                }
                                            </tr>
                                        </tbody>
                                    </table>
                                    break;
                                case 1:

                                    <table class="table table-striped table-hover refresh-container pull-down">
                                        <thead class="hidden-xs">
                                            <tr>
                                                <td class="col-sm-3"><a href="#"><strong>Subject</strong></a></td>
                                                <td class="col-sm-1"></td>
                                                <td class="col-sm-2"><a href="#"><strong>To</strong></a></td>
                                                <td class="col-sm-4"><a href="#"><strong>Date</strong></a></td>
                                                <td class="col-sm-1"></td>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr>
                                                @{
                                                    foreach (Message m in ViewBag.MsgDB)
                                                    {
                                                        <td class="col-sm-3 col-xs-4"><a herf="#" , style="color:black"><strong>@m.id</strong></a></td>
                                                        <td class="col-sm-1 col-xs-4"></td>
                                                        <td class="col-sm-2 col-xs-4">@m.reciverName</td>
                                                        <td class="col-sm-4 col-xs-6">@m.date</td>
                                                    }
                                                }
                                            </tr>
                                        </tbody>
                                    </table>
                                    break;
                            }
                        }
                    </div>
                    <!--message detail-->
                    <div class="container-fluid" ng-show="isMessageSelected()">
                        <div class="row" ng-controller="messageCtrl">  
                            <div class="col-xs-12"><hr></div>
                            <div class="col-xs-12">
                                <!--message body-->
                                <div ng-bind-html="renderMessageBody(selected.body)"></div>
                                <!--/message body-->
                            </div>
                            <div class="col-xs-12 clearfix"><hr></div>
                        </div><!--/row-->
                    </div>
                </div><!--/inbox panel-->
                <div class="well well-s text-right"><em>Last update: <span id="lastUpdated">@DateTime.Now</span></em></div>
            </div><!--/col-9-->
            <!-- /.modal compose message -->
            <div>
                <!--/row ng-controller-->

            </div><!--/container-->

        </div>

    </div>
</ng>